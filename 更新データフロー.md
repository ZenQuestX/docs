ã“ã®ãƒ•ãƒ­ãƒ¼ã¯ã€**ãƒ¡ã‚¤ãƒ³DBã®æ›´æ–°ã¨å±¥æ­´DBã®è¨˜éŒ²**ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚  

---

```mermaid
sequenceDiagram
    participant React as React (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰)
    participant API as FastAPI (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)
    participant MainDB as ãƒ¡ã‚¤ãƒ³DB
    participant HistoryDB as å±¥æ­´DB

    React->>API: å¤‰æ›´ãƒ‡ãƒ¼ã‚¿ã‚’PATCHãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    API->>MainDB: å¤‰æ›´å‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    API->>HistoryDB: å¤‰æ›´å‰ãƒ‡ãƒ¼ã‚¿ã‚’INSERTï¼ˆå±¥æ­´ä¿å­˜ï¼‰
    API->>MainDB: å¤‰æ›´ãƒ‡ãƒ¼ã‚¿ã®ã¿æ›´æ–°
    API-->>React: æ›´æ–°å®Œäº†ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

---

## **ðŸ’¡ è§£èª¬**
1. **React ã‹ã‚‰ FastAPI ã« `PATCH` ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**
2. **FastAPI ãŒãƒ¡ã‚¤ãƒ³DBã‹ã‚‰å¤‰æ›´å‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—**
3. **å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å±¥æ­´DBã« `INSERT`**
4. **ãƒ¡ã‚¤ãƒ³DBã®è©²å½“ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ `UPDATE`**
5. **React ã«ã€Œæ›´æ–°æˆåŠŸã€ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™**

ã“ã®æµã‚Œãªã‚‰ã€**å±¥æ­´ç®¡ç†ã‚‚å«ã‚ãŸãƒ‡ãƒ¼ã‚¿æ›´æ–°ã®ä»•çµ„ã¿**ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«å®Ÿè£…ã§ãã¾ã™ã­ï¼ ðŸš€

tsx
```tsx
const handleSubmit = async () => {
  const updatedData = Object.keys(formData).reduce((acc, key) => {
    if (formData[key] !== professor[key]) {
      acc[key] = formData[key];
    }
    return acc;
  }, {});

  if (Object.keys(updatedData).length > 0) {
    await fetch(`/api/professors/${professor.id}`, {
      method: "PATCH",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(updatedData),
    });
  }
};
```

