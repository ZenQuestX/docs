
# VS Code Copilotで更新・追加ファイルから技術設計書を生成するプロンプト

現在開いているファイルおよびこのプロジェクトで最近変更・追加されたファイルを分析し、Python/SQLAlchemy/ReactとAWSを使用したクラウドネイティブアプリケーションの技術設計書を生成してください。JIRA上の非技術的な情報（ユーザーストーリー、受入基準など）は既に管理されているため、技術的な側面に焦点を当ててください。

## 1. 技術概要

### 1.1 実装機能の技術的概要
変更・追加されたコードが実装している機能の技術的な説明を100-200単語程度で記述してください。全体的なアーキテクチャや主要なコンポーネントについて言及してください。

### 1.2 使用技術とライブラリ
変更・追加されたコードで使用されている主要な技術、フレームワーク、ライブラリを特定し、それぞれの役割を簡潔に説明してください。

## 2. コード変更の分析

### 2.1 変更・追加されたファイル
変更または追加されたファイルを列挙し、各ファイルの役割と変更内容の概要を説明してください。

### 2.2 影響範囲
これらの変更が既存コードベースのどの部分に影響するかを分析してください。依存関係や連鎖的な変更が必要な箇所を特定してください。

## 3. コンポーネント設計

### 3.1 主要コンポーネント
変更・追加されたコードの主要なコンポーネント（クラス、関数、モジュールなど）を特定し、それぞれの責務と相互関係を説明してください。設計パターンやアーキテクチャパターンについても言及してください。

### 3.2 データフロー
変更・追加されたコードにおけるデータの流れを説明してください。入力がどのように処理され、どこに保存され、どのように出力されるかを追跡してください。

## 4. データモデル変更（該当する場合）

### 4.1 SQLAlchemyモデル変更
変更・追加されたSQLAlchemyモデルを分析し、エンティティ、属性、リレーションシップの変更点を特定してください。データマイグレーションが必要な場合はその詳細も記述してください。

### 4.2 データバリデーションとビジネスルール
新たに追加または変更されたデータバリデーションロジックやビジネスルールを特定し、説明してください。

## 5. API変更（該当する場合）

### 5.1 エンドポイント仕様
変更・追加されたAPIエンドポイントを文書化し、各エンドポイントの目的、入力パラメータ、レスポンス形式、エラー処理を説明してください。既存APIとの整合性についても評価してください。

### 5.2 認証と認可
APIの認証メカニズムと認可ロジックに変更がある場合、その詳細を説明してください。

## 6. フロントエンド変更（該当する場合）

### 6.1 Reactコンポーネント変更
変更・追加されたReactコンポーネントの階層と責務分担を分析してください。コンポーネントの再利用性、props管理、状態管理アプローチについて言及してください。

### 6.2 状態管理変更
状態管理（Redux、Context API、React Queryなど）に変更がある場合、その詳細とデータフローへの影響を説明してください。

### 6.3 UIとUX変更
UIコンポーネント、レスポンシブデザイン、アクセシビリティに関する変更があれば説明してください。

## 7. AWS インフラストラクチャ変更（該当する場合）

### 7.1 変更されたAWSリソース
変更・追加されたAWSサービスやリソース（Lambda、DynamoDB、S3など）を列挙し、それぞれの変更内容と設定を説明してください。

### 7.2 インフラストラクチャアーキテクチャへの影響
インフラストラクチャアーキテクチャ（サーバーレス、コンテナ化、マイクロサービスなど）に変更がある場合、その詳細と影響を説明してください。

### 7.3 セキュリティへの影響
IAMポリシー、VPC設定、暗号化メカニズムなどのセキュリティ面での変更があれば説明してください。

## 8. パフォーマンスと最適化

### 8.1 パフォーマンスへの影響
変更・追加されたコードがアプリケーションのパフォーマンスに与える潜在的な影響を分析してください。最適化が実装されている場合はその詳細も記述してください。

### 8.2 スケーラビリティへの影響
変更・追加されたコードがアプリケーションのスケーラビリティに与える影響を分析してください。

## 9. テスト戦略

### 9.1 テスト範囲
変更・追加されたコードに対するテスト（ユニットテスト、統合テスト、E2Eテスト）の範囲と方法を説明してください。

### 9.2 テストケース
主要なテストケースとエッジケースを列挙し、それぞれのテスト方法を説明してください。

## 10. 技術的負債と改善点

### 10.1 コード品質評価
変更・追加されたコードの品質を評価し、リファクタリングの候補となる領域を特定してください。

### 10.2 改善提案
コードベースを改善するための具体的な提案を3-5点提供してください。各提案には技術的根拠を含めてください。

## 11. デプロイメントへの影響

### 11.1 デプロイメント手順への影響
変更・追加されたコードのデプロイメント方法と、既存のCI/CDパイプラインへの影響を説明してください。

### 11.2 環境固有の考慮事項
開発、テスト、本番などの異なる環境に対する配慮点があれば説明してください。

## 12. まとめと開発者向け注意点

### 12.1 技術設計の要点
この実装の主要な技術的決定と設計パターンを要約してください。

### 12.2 開発者向け注意点
このコードを維持または拡張する開発者向けに、特に注意すべき点や前提条件を記載してください。

## 指示
このテンプレートに基づいて、現在のファイルや最近変更・追加されたファイルの技術設計書を作成してください。すべてのセクションを埋める必要はなく、コードの変更内容と範囲に応じて、関連するセクションに焦点を当ててください。分析が困難なセクションについては、その理由を説明してください。実用的で明確な技術ドキュメントを作成することを目指してください。
一度にすべてを出力しようとせず、「### 1.1 実装機能の技術的概要 → ### 1.2 使用技術とライブラリ → ...」という順に分割してください。
